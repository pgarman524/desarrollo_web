<!DOCTYPE html>
<html lang="en">
<!-- media (1,1,5,8,5) ------ (2+1+5+8+5) / 5
rango 8-1 =  7
moda 1º) (2,1,5,8,5)  == 5
2º) (2,1,5,8)   == No hay moda
3º) (2,2,3,5,8,5)   == 2,5
4º) (2,2,1,5,8,5)   == (2+5) / 2 = 3.5
-->


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema4/Actividad01</title>
    <script>



        /**
                function anadirNum() {
                    let arrNum = [];
                    let num = parseFloat(selector);
                    arrNum.push(num);
                    for (let i = 0; i < arrNum.length; i++) {
                        alert(arrNum[i]);
                    }
                }
                    for (let i = 0; i < arrNum.length; i++) {
                        alert(arrNum[i]);
                    }
        */

        function menu() {
            let arrNum = [];
            while (true) {
                let mensaje = "Introduce un número: ";
                let selector = prompt(mensaje);
                if (selector === 'f') {
                    media();
                    //Introducimos en la función arrNum para poder hacer los cálculos
                    rango(arrNum);
                    moda(arrNum);
                    break;
                } else {
                    let num = parseFloat(selector);
                    arrNum.push(num);
                    alert(arrNum);
                }
            }
            //La function tiene que estar dentro para que pueda usar el arrNum[]
            function media() {
                if (arrNum.length == 0) {
                    alert("No hay números aún introducidos");
                    return;
                }
                for (let i = 0; i < arrNum.length; i++) {
                    let mediaCalculo = 0;
                    mediaCalculo += arrNum[i];
                    //La media suma todos sus valores y luego se divide entre el max del array
                    mediaFinal = mediaCalculo / arrNum.length;
                    alert("La media es de: " + mediaFinal)
                    return mediaFinal;
                }
            }
            //En esta función introducimos el parámetro arrNum llamado arr para que tenga en cuenta los índices de nuestro arr principal
            function rango(arr) {
                // Si no hay números en el array te da una alerta.
                if (arr.length == 0) {
                    alert("No hay números aún introducidos");
                    return;
                }

                let min = arr[0];
                let max = arr[0];

                for (let i = 0; i < arr.length - 1; i++) {

                    // Comparamos con el num del arrNum y si este es menor que min, este se transforma
                    if (arr[i] < min) {
                        min = arr[i];
                    }
                    // Comparamos con el num del arrNum y si este es mayor que max, este se transforma
                    if (arr[i] > max) {
                        max = arr[i];
                    }
                }

                // Calculamos el rango y lo devolvemos
                let rangoCalc = max - min;
                alert("El rango es de: " + rangoCalc);
                return rangoCalc;
            }

            function moda(arr) {
                if (arr.length == 0) {
                    alert("No hay números aún introducidos");
                    return;
                }

                // Este es el contador
                let token = [];
                let modas = [];
                let enMedio = false;
                let num = arr[i];


                // Contamos la frecuencia de cada número
                for (let i = 0; i < arr.length; i++) {


                    // Incremento el contador si el número ya se ha repetido
                    if (token[num] == 1) {
                        token[num]++;
                    } else {
                        // Si no se ha visto antes, inicializa en 1
                        token[num] = 1;
                    }
                }

                //Esto nos servirá para ver quién es el número que más veces aparece
                let contadorMax = 0;
                let moda = null;

                // Buscamos el número que más se repite
                for (let i = 0; i < arr.length; i++) {
                    let num = arr[i];

                    if (token[num] > contadorMax) {
                        contadorMax = token[num];
                        moda = num;
                    }
                }



                if (contadorMax > 1) {
                    alert("La moda es: " + moda);
                } else {
                    alert("No hay moda.");
                }
            }
        }









        menu();

    </script>

</head>

<body>

</body>

</html>